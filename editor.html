<!DOCTYPE html>
<html>
<head>
    <title>Abiathar Online</title>
	<meta charset="utf-8" />
    <link type="text/css" href="abiathar.css" rel="stylesheet" />
    <script type="text/javascript" src="OpenThar.js"></script>
    <script type="text/javascript" src="https://www.dropbox.com/static/api/2/dropins.js" id="dropboxjs" data-app-key="n885406adr3hbmg"></script>
</head>
<body class="startpage">
    <div class="center-outer" id="setup"><div class="center-middle"><div class="center-inner">
        <!-- This section will be hidden by scripting after editor resources are selected and loaded -->
        <div class="maintitle" id="title">Let's begin</div>
        <div class="startinfo">
            <span id="msg">If your resources are all together in your Dropbox, you can select them all at once. If you have a tricky setup, you'll need to choose the files one at a time.</span>
            <div id="setupControl">
                <!-- This section will be hidden after resources are selected -->
                <table style="display:none" id="resTable">
                    <tbody>
                        <tr><th>Resource</th><th class="filename">Filename</th></tr>
                        <tr><td>Main maps file</td><td class="monocell"><span id="resGamemaps"></span><a href="javascript:;" onclick="pickGamemaps();" id="pickGamemaps">[Pick]</a></td></tr>
                        <tr><td>Map header</td><td class="monocell"><span id="resMaphead"></span><a href="javascript:;" onclick="pickMaphead();" id="pickMaphead">[Pick]</a></td></tr>
                        <tr><td>Background tileset</td><td class="monocell"><span id="resBacktils"></span><a href="javascript:;" onclick="pickBacktils();" id="pickBacktils">[Pick]</a></td></tr>
                        <tr><td>Foreground tileset</td><td class="monocell"><span id="resForetils"></span><a href="javascript:;" onclick="pickForetils();" id="pickForetils">[Pick]</a></td></tr>
                    </tbody>
                </table>
                <span id="goFinal" style="display:none">
                    <br /><br />
                    <a href="javascript:;" onclick="confirmSetup();" class="button" style="background-color:cyan">LAUNCH EDITOR</a>
                    <br />
                </span>
                <br /><br /><br />
                <a href="start.html" class="button" style="background-color:dimgray">TO HOMEPAGE</a>&nbsp;
                <a href="javascript:;" onclick="setupHard();" class="button" style="background-color:darkblue" id="goHard">ONE AT ONCE</a>&nbsp;
                <a href="javascript:;" onclick="setupEasy();" class="button" style="background-color:blue" id="goEasy">ALL TOGETHER</a>
            </div>
        </div>
    </div></div></div>
    <div id="editControl" style="display:none">
        <div class="editbar">
            <div class="editbarcontent">
                <div class="planeinfo">
                    <a href="javascript:;" onclick="gotoLevelRerender(-1);">Background</a><br />
                    <div class="planeinforow">
                        <span id="planeState0">Editable</span><span id="tileId0" class="seltileid">0000</span>
                    </div><br />
                    <img id="selTile0" width="64" height="64" class="seltileimage" />
                    <div class="planectl">
                        <a href="javascript:;" onclick="setPlaneState(0, 0);">Edit</a><br />
                        <a href="javascript:;" onclick="setPlaneState(0, 1);">View</a><br />
                        <a href="javascript:;" onclick="setPlaneState(0, 2);">Hide</a>
                    </div>
                </div>
                <div class="planeinfo">
                    <a href="javascript:;" onclick="gotoLevelRerender(-2);">Foreground</a><br />
                    <div class="planeinforow">
                        <span id="planeState1">Editable</span><span id="tileId1" class="seltileid">0000</span>
                    </div><br />
                    <img id="selTile1" width="64" height="64" class="seltileimage" />
                    <div class="planectl">
                        <a href="javascript:;" onclick="setPlaneState(1, 0);">Edit</a><br />
                        <a href="javascript:;" onclick="setPlaneState(1, 1);">View</a><br />
                        <a href="javascript:;" onclick="setPlaneState(1, 2);">Hide</a>
                    </div>
                </div>
                <div class="planeinfo">
                    <a href="javascript:;" onclick="gotoLevelRerender(-3);">Infoplane</a><br />
                    <div class="planeinforow">
                        <span id="planeState2">Editable</span><span id="tileId2" class="seltileid">0000</span>
                    </div><br />
                    <img id="selTile2" width="64" height="64" class="seltileimage" />
                    <div class="planectl">
                        <a href="javascript:;" onclick="setPlaneState(2, 0);">Edit</a><br />
                        <a href="javascript:;" onclick="setPlaneState(2, 1);">View</a><br />
                        <a href="javascript:;" onclick="setPlaneState(2, 2);">Hide</a>
                    </div>
                </div>
                <!-- TODO maybe: generate the tile bays with JavaScript rather than copy/paste -->
                <div class="edithud">
                    <span id="backToLevel" style="display:none"><a href="javascript:;" onclick="gotoRealLevel();">Back to level</a><br /></span>
                    Currently viewing: <span id="curLevel"></span> |
                    <a href="javascript:;" onclick="showLevelsList();">Switch Level</a>
                </div>
                <div style="float:right;margin-top:1em">
                    <a href="javascript:;" class="button" style="background-color:blue" onclick="saveLevels();" id="saveButton">SAVE</a>
                    <a href="javascript:;" class="button" style="background-color:gray;display:none" id="savingButton">SAVING</a><br /><br />
                    <div id="saveProgress" style="text-align:right"></div>
                </div>
            </div>
            <div class="editsplit"></div>
        </div>
        <div class="editbarfloatbuffer"></div>
        <div class="editarea"><div class="editareacontent">
            <canvas id="mainView" style="cursor:default"><!-- The size of the main canvas will be set and updated by script --></canvas>
            <div id="levelList" style="display:none"><!-- This section will be populated with links to levels by script --></div>
        </div></div>
    </div>
</body>
</html>
